<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gxa.jbgsw.business.mapper.ShareCommentMapper">


    <resultMap id="commentDTOMap" type="com.gxa.jbgsw.business.protocol.dto.CommentResponse">
        <id property="id" column="id"></id>
        <result property="nick" column="nick"></result>
        <result property="content" column="content"></result>
        <result property="createAt" column="create_at"></result>
        <result property="shareId" column="share_id"></result>
        <result property="content" column="content"></result>

        <association property="children"
                     select="com.gxa.jbgsw.business.mapper.ShareCommentMapper.getCommentById" column="{shareId=share_id,parentId=id}"
                     fetchType="lazy">
        </association>

    </resultMap>


    <select id="getCommentById" resultMap="commentDTOMap">
     SELECT id,avatar,nick,create_at AS createAt,content,share_id AS shareId FROM t_share_comment
      WHERE share_id = #{shareId} AND parent_id = #{parentId}
    </select>





</mapper>